# QA Tracker Bookmarklet

To use this, create a new bookmark in your browser and paste the following code into the **URL** (or **Location**) field.

### The Bookmarklet Code (Copy this):

```javascript
javascript:(function(){var w=650,h=800,l=(screen.width-w)/2,t=(screen.height-h)/2;var p=window.location.pathname;var parts=p.split('/');var bIdx=parts.indexOf('form-builder');var f=(bIdx!==-1&&parts[bIdx+1])?parts[bIdx+1]:'9d95762a-cdb3-46e0-bc02-1df25f8dbed7';var u='https://qa-tracker-toast.vercel.app/embed/audit/'+f+'?url='+encodeURIComponent(window.location.href);var popup=window.open(u,'QAForm','width='+w+',height='+h+',top='+t+',left='+l+',scrollbars=yes');if(!popup||popup.closed||typeof popup.closed=='undefined'){alert('Popup Blocked!');return}window.removeEventListener('message',window.__qaBridge);window.__qaBridge=function(e){if(e.origin!=='https://qa-tracker-toast.vercel.app')return;if(e.data.type==='REQUEST_HOST_DATA'){var getVal=function(s){var el=document.querySelector(s);return el?el.textContent.trim():""};var h4s=Array.from(document.querySelectorAll('h4'));var findH4Val=function(txt){var h4=h4s.find(function(el){return el.textContent.trim().includes(txt)});return h4&&h4.nextElementSibling?h4.nextElementSibling.textContent.trim():""};var extractTranscript=function(){var els=document.querySelectorAll('.spec-transcript-content');return Array.from(els).map(function(el){return el.innerText.trim()}).join("\n")};var data={interaction_id:findH4Val('Interaction ID'),advocate_name:getVal('.review-info h2'),ani:findH4Val('ANI'),dnis:findH4Val('DNIS'),duration:findH4Val('Call Duration'),transcript:extractTranscript()};popup.postMessage({type:'HOST_PAGE_DATA',data:data},'*')}if(e.data.type==='AUTOMATE_PAGE'){var items=e.data.data;var processItem=function(index){if(index>=items.length){popup.postMessage({type:'AUTOMATION_COMPLETE'},'*');return}var item=items[index];var h2s=Array.from(document.querySelectorAll('h2'));var h2=h2s.find(function(el){return el.textContent.trim().toLowerCase().includes(item.groupName.toLowerCase())});var container=h2?h2.closest('.padding-xlarge')||h2.parentElement:document;var itemEl=container.querySelector('[data-idx="'+item.index+'"]');if(!itemEl){var labels=Array.from(container.querySelectorAll('label'));var label=labels.find(function(l){return l.textContent.toLowerCase().includes(item.fullQuestion.toLowerCase())});itemEl=label?label.closest('div'):null}if(itemEl){var buttons=Array.from(itemEl.querySelectorAll('button'));var targetBtn=buttons.find(function(b){return b.textContent.trim().toLowerCase()===item.answer.toLowerCase()});if(targetBtn){targetBtn.click();setTimeout(function(){if(item.tags&&item.tags.length>0){var allBtns=Array.from(itemEl.querySelectorAll('button'));item.tags.forEach(function(tagLabel){var tBtn=allBtns.find(function(b){return b.textContent.trim().toLowerCase().includes(tagLabel.toLowerCase())});if(tBtn)tBtn.click()})}var textarea=itemEl.querySelector('textarea');if(textarea){var finalText=item.feedback||("Automated: "+item.answer);try{var proto=Object.getPrototypeOf(textarea);var setter=Object.getOwnPropertyDescriptor(proto,"value").set;if(setter)setter.call(textarea,finalText);else textarea.value=finalText}catch(err){textarea.value=finalText}textarea.dispatchEvent(new Event('input',{bubbles:true}));textarea.dispatchEvent(new Event('change',{bubbles:true}))}processItem(index+1)},2500)}else{processItem(index+1)}}else{processItem(index+1)}};processItem(0)}};window.addEventListener('message',window.__qaBridge)}
})();
```

### How to use it:
1. **From Form Builder:** If you are currently editing a form in the tracker, just click the bookmark. It will automatically detect which form you are working on and open it in the popup.
2. **From Any Site:** If you want to use it while auditing another website, you can edit the bookmark and replace `'YOUR_FORM_ID_HERE'` with the specific ID of the form you want to use most often.

---
*Note: If the popup doesn't appear, check if your browser is blocking popups for the site you are currently on.